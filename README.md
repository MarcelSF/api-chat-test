# README

Chatbot API for Lytt. An exercise in RESTful API, Rspec testing and cloud implementation.

* Ruby version 2.4.4

* SETUP: After cloning the repository, just run bundle install and rails s. The API should be available in localhost:3000

* Important Gems:

 This API uses the Compact Language Detection(CLD) for Ruby gem. It can quickly identify the language of a string and I used it to return the correct language code for my Message models.

 I also used Active Model Serializers to more easily determine which information would be available in the endpoints. Should, in the future, more sensible data be added to Messages or Replies, we can easily determine what attributes should or shouldn't be sent to the front-end.

* Testing: Use 'bundle exec rspec' to run the test suite. It uses primarily Rspec, database_cleaner and factory_bot. I decided to test the model validations and the endpoints primarily. More testing could be implemented, specially with a front-end implementation.

* Endpoints:

 This API has 3 main endpoints and associated error messages:

#1 - Receive: a text message from a reporting person (user) in any language then Detect Language: German, English and Spanish language only. Any other language will make the API respond a programmed 422 status error message: "Unfortunately we don't have support for your language yet."

ENDPOINT:

 POST localhost:3000/api/v1/sessions/session_id/messages

Each message will be saved with timestamps, a detected language code and a unique random identifier generated by the API. For security reasons, the text is saved as an empty string ("").

#2 - Allow retrieving a message information, by using its unique identifier. Each message has a unique identifier. If you have it's session ID and identifier, you can access the message. Otherwise, you'll see a 404 status error with the message: "Resource doesn't exist"

ENDPOINT

  GET localhost:3000/api/v1/sessions/session_id/messages/identifier

#3 - Reply/Fetch Automated Replies: with the correct "Reply" for every user message, in the correct user session and order. The messages are displayed in a DESCENDING order (newest to oldest). This endpoint will return an array with all the replies associated to that session, provided you have it's ID.

ENDPOINT

GET localhost:3000/api/v1/sessions/session_id/replies



* Configuration

This API uses Postgreql database. Redis and CORS is also setup for future ACTION CABLE implementation with React.

* Database creation

A simple rails db:create db:migrate should be enough to let anyone use the API after running Rails s.

* How to run the test suite

Simply run 'bundle exec rspec' to run the test suite. It focuses mainly on the models and the endpoints themselves, testing the correct responses for each available endpoint.

* Services (job queues, cache servers, search engines, etc.)

There are no services enabled other than Action Cable, which is enabled for future implementation of Web Sockets and Front-End integration.

